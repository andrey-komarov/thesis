\documentclass[a4paper]{report}

\usepackage{fontspec}
\usepackage{polyglossia}
\setdefaultlanguage[spelling=modern]{russian}
\setotherlanguage{english}
\setmainfont[Ligatures=TeX]{FreeSerif}
\newfontfamily\cyrillicfontsf{FreeSerif}
\newfontfamily\cyrillicfontit{FreeSerif}
\newfontfamily\cyrillicfonttt{FreeSerif}

\usepackage[backend=biber,bibencoding=utf8,sorting=none,sortcites=true,bibstyle=sty/gost71,maxnames=99,citestyle=numeric-comp,babel=other]{biblatex}
%\usepackage[utf8]{inputenc}
\usepackage{textcomp}
\usepackage{csquotes}
\usepackage{caption}
\usepackage{subcaption}
%\usepackage[pdftex]{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{sty/dbl12}
\usepackage{sty/rac}
\usepackage{epigraph}
\usepackage{agda}

\usepackage{tikz}
\usetikzlibrary{arrows,positioning,shapes}
\tikzset{context/.style={circle, draw=black, minimum size=1cm}}
\tikzset{patch/.style={fill=white}}
\tikzset{gitbranch/.style={rectangle, rounded corners, draw=black}}
\tikzset{gitcommit/.style={rectangle, rounded corners, draw=black,
    minimum width = 1.5cm, rectangle split, rectangle split parts = 2}}
\tikzset{gitbranchconnect/.style={->,dashed}}


\colorlet{patchform}{blue!40}
\usepackage{tikz}
\usetikzlibrary{shapes.multipart}
\usetikzlibrary{chains}
\usetikzlibrary{fit}
\usetikzlibrary{backgrounds}
\usetikzlibrary{arrows}
\tikzset{vecpatch/.style={
    draw=black, 
    minimum width=0.5cm, 
    minimum height=1cm,
    inner sep=-1cm,
    outer sep=-1cm,
    anchor=center}
}
\tikzset{vecpatch-tiny/.style={vecpatch, minimum height=0.5cm}}
\tikzset{vecpatch-f/.style={vecpatch}}
\tikzset{vecpatch-t/.style={vecpatch,fill=yellow}}
\tikzset{vecpatch-d/.style={vecpatch-tiny,anchor=base}}
\tikzset{vecpatch-op/.style={font=\large}}
\tikzset{vecpatch-form/.style={vecpatch-tiny,fill=patchform}}

\tikzset{treev/.style={draw=black,circle,outer sep=0,minimum
    height=8mm,very thick}}
\tikzset{treearr/.style={draw, -latex, very thick}}

\newcommand{\vecfe}[0]{\node[vecpatch-tiny] {};}
\newcommand{\vecff}[0]{\node[vecpatch-form] {};}
\newcommand{\vecf}[0]{\node[vecpatch-f] {};}
\newcommand{\vecd}[1]
{\node[vecpatch-d, draw=none] {$#1$}; 
 \node[vecpatch-d, text opacity=0] {b};}
\newcommand{\vect}[2]{\node[vecpatch-t]
{\begin{tabular}{l}$#1$\\$#2$\\\end{tabular}};}



\theoremstyle{plain}
\newtheorem{theorem}{Теорема}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Определение}
\newtheorem{notation}[theorem]{Обозначение}

% Redefine margins and other page formatting

\setlength{\oddsidemargin}{0.5in}

\binoppenalty=10000
\relpenalty=10000

\addbibresource{thesis.bib}

\defbibenvironment{bibliography} {\list
  {\printfield[labelnumberwidth]{labelnumber}.}
  {\setlength{\labelwidth}{2\labelnumberwidth}%
    \setlength{\leftmargin}{\labelwidth}%
    \setlength{\labelsep}{\biblabelsep}%
    \addtolength{\leftmargin}{\labelsep}%
    \setlength{\itemsep}{\bibitemsep}%
    \setlength{\parsep}{\bibparsep}}%
  \renewcommand*{\makelabel}[1]{\hss##1}} {\endlist} {\item}


\begin{document}

\pagestyle{title}

\begin{center}
  Университет ИТМО \\
  \hrulefill
 
\vspace{2cm}

Факультет информационных технологий и программирования

Кафедра компьютерных технологий

\vspace{3cm}

{\Large Комаров Андрей Валерьевич}

\vspace{2cm}

\vbox{\LARGE\bfseries Аксиоматизация системы контроля версий в
  формализме зависимых типов }

\vspace{4cm}

{\Large Научный руководитель: ассистент кафедры ТП Я.~М.~Малаховски}

\vspace{6cm}

Санкт-Петербург\\ \today
\end{center}


\newpage
\pagestyle{plain}

\tableofcontents

% Chapters
\startthechapters
\input{chapters/intro.tex}
\input{chapters/chapter1.tex}
\input{chapters/chapter2.tex}
%\input{chapters/chapter3.tex}
\input{chapters/outro.tex}

\printbibliography

\end{document}
